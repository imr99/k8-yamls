apiVersion: v1
kind: Pod
metadata:
  name: mani
  namespace: mani
  labels:
    name: mani
spec:
  containers:
  - image: nginx:latest
    name: web-server
    ports:
      - containerPort: 80
        protocol: TCP
    volumeMounts:
    - name: html            # changes committed in code will be reflected in code.
      mountPath: /usr/share/nginx/

  - name: git-sync
    image: k8s.gcr.io/git-sync:v3.0.1
    volumeMounts:
        - name: html
          mountPath: /tmp/git/
    env:
        - name: GIT_SYNC_REPO
          value: https://github.com/imr99/ecomm.git
        - name: GIT_SYNC_BRANCH
          value: master
        - name: GIT_SYNC_DEST
          value: html
  volumes:
   - name: html
     emptyDir: {}